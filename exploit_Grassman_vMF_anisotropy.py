import numpy as np

import pandas as pd
import os 
import itertools
path_save="Grassman_von_Mises_Fisher_distribution/results_ani"

seed=22

p=2
n=3
N=100000

n_resamp=10



w_list=[1,7]
m_list=[1,3,10]
lambda_list=[1,10,100]
use_adapt=False
to_prod=[lambda_list,w_list,m_list]
list_param=list(itertools.product(*to_prod))

print(list_param)
k=0
for param in list_param:
    lambda_,w,m=param

    
    name="n_toys_examples_slice_grassman_s{:.0f}_w{:.0f}_lambda{:.0f}_N{:.0f}_m{:.0f}.csv".format(seed,w,lambda_,N,m)
    dh=pd.read_csv(os.path.join(path_save,name))
    name="n_rate_toys_examples_slice_grassman_s{:.0f}_w{:.0f}_lambda{:.0f}_N{:.0f}_m{:.0f}.csv".format(seed,w,lambda_,N,m)
    rate=pd.read_csv(os.path.join(path_save,name))
    vec_=dh.values
    print("lambda,w,m",param)
    
    print("ESS min",vec_[:,1].min())
    print("ESS median",np.median(vec_[:,1]))
    print("ESS max",vec_[:,1].max())

    print("RATE lambda,w,m",param)
    vec_=rate.values
    print("RATE min",vec_[:,1].min())
    print("RATE median",np.median(vec_[:,1]))
    print("RATE max",vec_[:,1].max())

print("hmc")
h_list=[0.01,1]
to_prod=[lambda_list,h_list]
list_param=list(itertools.product(*to_prod))
for param in list_param: 
    lambda_,h=param
  
    name="n_toys_examples_grassman_hmc_s{:.0f}_h{:.2f}_lambda{:.0f}_N{:.0f}.csv".format(seed,h,lambda_,N)
    dg=pd.read_csv(os.path.join(path_save,name))
    vec_=dg.values
    print("lambda,h",param)
    
    print("ESS min",vec_[:,1].min())
    print("ESS median",np.median(vec_[:,1]))
    print("ESS max",vec_[:,1].max())

